## 인증 vs 인가

- **인증 (Authentication)** : 사용자의 **신원**을 확인하는 행위

- **인가 (Authorization)** : 사용자 **권한**을 확인하는 행위

> 💡 **웹에서는?**
> - **인증** : 로그인을 통해 본인임을 확인
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(주로 아이디와 패스워드 이용)<br>
>
> - **인가** : 주로 역할에 따른 사용 권한 관리
    > &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ex: 웹 카페 사이트에서 회원 랭킹별 접근 가능 게시판 관리)


<br>
<br>

## HTTP의 특성

- HTTP는 상태를 저장하지 않는다. (=Stateless하다)

![](https://velog.velcdn.com/images/sw_smj/post/89e5269e-6c87-4ecd-b2d7-9225ea5a12ed/image.png)


- 그림에서 클라이언트의 요청을 서버에게 보낸 후, 응답을 받을 때까지가 하나의 HTTP 요청이다.

- 하지만 HTTP의 상태는 기억되지 않기 때문에, 웹 서버에서는 1번이 2번과 같은 클라이언트의 요청인지 알 수 없다.

<br>
<br>

## 쿠키 vs 세션

쿠키와 세션 모두 HTTP에 상태정보를 유지(stateful하도록) 하기 위해 사용된다. 즉, 쿠키/세션을 통해 서버에서는 클라이언트별로 인증 및 인가를 할 수 있게 된다.

### 쿠키

- 클라이언트에 저장될 목적으로 생성한, 작은 정보를 담은 파일


- 구성요소
    - Name (이름) : 쿠키를 구별하는 데에 사용되는 키
    - Value (값) : 쿠키의 값
    - Domain (도메인) : 쿠키가 저장된 도메인
    - Path (경로) : 쿠키가 사용되는 경로
    - Expires (만료기한) : 쿠키의 만료 기한 (만료기한이 지나면 삭제됨)

### 세션

- 서버에서 일정시간 동안 클라이언트 상태를 유지하기 위해 사용


- 서버에서 클라이언트 별로 유일무이한 '세션 ID'를 부여한 후 클라이언트 별 필요한 정보를 서버에 저장


- 서버에서 생성한 '세션 ID'는 클라이언트의 쿠키값('세션 쿠키'라고 부름)으로 저장되어 클라이언트 식별에 사용됨


- 세션 동작 방식

![](https://velog.velcdn.com/images/sw_smj/post/21e3bf61-87d5-4b57-b06d-6b0f0f1bbf7d/image.png)

<br>

위 그림에서와 같이 서버는 세션ID를 사용하여 세션을 유지함

1. 클라이언트가 서버에 요청 보냄

2. 서버가 세션 ID를 생성하고, 응답 헤더에 전달
   : 세션 ID 형태 : SESSIONID = 12A345

3. 클라이언트가 쿠키를 저장 ('세션쿠키')

4. 클라이언트가 서버에 재 요청 시
   : 쿠키값 (세션ID) 포함하여 요청

5. 서버가 세션ID를 확인하고, 1번 요청과 같은 클라이언트임을 인지


<br>

### 쿠키 vs 세션 비교

|  | 쿠키 | 세션 |
| -- | -- | -- |
| 설명 | 클라이언트에 저장될 목적으로 생성한 작은 정보를 담은 파일 | 서버가 일정시간동안 클라이언트 상태를 유지하기 위해 사용 |
| 저장 위치 | 클라이언트<br>(웹 브라우저) | 웹 서버 |
| 사용 예 | 사이트 팝업의 '오늘 다시 보지 않기' 정보 저장 | 로그인 정보 저장 |
| 만료 시점 | 쿠키 저장시 만료일시 설정 가능 (브라우저 종료시도 유지 가능) | 다음 조건 중 하나가 만족될 경우 만료됨<br>1. 브라우저 종료<br>2. 클라이언트 로그아웃<be>3. 서버에 설정한 유지기간까지 해당 클라이언트의 재요청이 없는 경우|
| 용량 제한 | 브라우저별로 다름 (크롬 기준) | 개수 제한 없음<br>(단, 세션 저장소 크기 이상 저장 불가)|
| 보안 | 취약<br>(클라이언트에서 쿠키 정보를 쉽게 변경, 삭제 및 가로채기 당할 수 있음) | 비교적 안전<br>(서버에 저장되기 때문에 상대적으로 안전)|
